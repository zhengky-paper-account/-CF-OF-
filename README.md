# -CF-OF-
1.无符号数：CF为cary flag进位/借位标记，当2个数相加产生了进位时或2个数相减产生了借位时，CF=1
<img width="267" height="49" alt="图片" src="https://github.com/user-attachments/assets/a35888a8-deb9-407d-8106-40af90001a7a" />
<img width="980" height="467" alt="图片" src="https://github.com/user-attachments/assets/95c99d11-e57f-4f69-a14a-3ef68aae4995" />
<img width="1657" height="294" alt="图片" src="https://github.com/user-attachments/assets/b6302168-3f5d-4677-86aa-ce1cfe4f6dd4" />

2.有符号数：OF为overflow flag溢出标记，当运算结果result溢出时，OF=1；未溢出时，OF=0
OF的计算方法：
<img width="1511" height="462" alt="图片" src="https://github.com/user-attachments/assets/389ff910-fd16-4b1d-9e8f-7e4ab2076d30" />
<img width="1581" height="782" alt="图片" src="https://github.com/user-attachments/assets/1190561f-652f-4e81-93dc-9603260590a7" />
<img width="1696" height="862" alt="图片" src="https://github.com/user-attachments/assets/8eae6b0a-9f3e-4874-b6f5-51984afaaa66" />
<img width="1695" height="787" alt="图片" src="https://github.com/user-attachments/assets/388784ad-84c9-438d-8b90-7429ea70023f" />
注：从图形上理解，为什么原码数值相加有进位，补码数值相加就没有进位：两个数原码相加大于360度，两个原码、补码相加一共720度，那么两个补码相加一定小于360度
<img width="440" height="236" alt="图片" src="https://github.com/user-attachments/assets/3c9e8351-a4b5-4a7d-b85e-c4cbeecf7667" />
<img width="1702" height="791" alt="图片" src="https://github.com/user-attachments/assets/e2928036-4d87-49f1-a149-93ea1b0e0dc9" />





 # 3.1 词法分析方法流程图

## 3.1.2 主控流程图

```mermaid
flowchart TD
    开始([开始词法分析]) --> 初始化[初始化词法分析器对象<br/>设置输入字符串和位置指针]
    初始化 --> 循环判断{是否到达输入末尾?}
    循环判断 -->|是| 添加结束标记[添加文件结束标记Token]
    添加结束标记 --> 结束([结束])
    循环判断 -->|否| 跳过空白注释[调用跳过空白字符和注释函数]
    跳过空白注释 --> 检查字符{检查当前字符类型}
    检查字符 -->|是字母或下划线| 识别标识符[调用标识符/关键字识别函数]
    检查字符 -->|是数字| 识别数字[调用数字常量识别函数]
    检查字符 -->|是单引号| 识别字符[调用字符常量识别函数]
    检查字符 -->|是双引号| 识别字符串[调用字符串常量识别函数]
    检查字符 -->|其他| 识别运算符[调用运算符/界符识别函数]
    识别标识符 --> 循环判断
    识别数字 --> 循环判断
    识别字符 --> 循环判断
    识别字符串 --> 循环判断
    识别运算符 --> 循环判断
```

## 3.1.4 空白字符和注释处理流程图

```mermaid
flowchart TD
    开始([开始跳过空白字符和注释]) --> 循环处理{循环处理}
    循环处理 --> 跳过空白[跳过所有空白字符<br/>循环读取空白字符直到非空白]
    跳过空白 --> 检查单行注释{当前字符是斜杠<br/>且下一个字符是斜杠?}
    检查单行注释 -->|是| 处理单行注释[处理单行注释<br/>读取字符直到换行符]
    处理单行注释 --> 循环处理
    检查单行注释 -->|否| 检查块注释{当前字符是斜杠<br/>且下一个字符是星号?}
    检查块注释 -->|是| 处理块注释[处理块注释<br/>循环查找结束标记]
    处理块注释 --> 检查结束标记{找到结束标记星号斜杠?}
    检查结束标记 -->|否| 报错块注释[报错: 块注释未闭合]
    检查结束标记 -->|是| 循环处理
    检查块注释 -->|否| 返回([返回])
```

## 3.1.6 标识符和关键字识别流程图

```mermaid
flowchart TD
    开始([开始识别标识符或关键字]) --> 保存位置[保存当前位置]
    保存位置 --> 初始化词法值[初始化词法值字符串为空]
    初始化词法值 --> 读取首字符[读取第一个字符<br/>追加到词法值字符串]
    读取首字符 --> 循环判断{当前字符是字母、<br/>数字或下划线?}
    循环判断 -->|是| 追加字符[追加当前字符到词法值<br/>移动指针]
    追加字符 --> 循环判断
    循环判断 -->|否| 检查关键字表{词法值在关键字表中?}
    检查关键字表 -->|是| 生成关键字Token[生成关键字Token]
    检查关键字表 -->|否| 检查符号表{词法值在符号表中?}
    检查符号表 -->|否| 添加到符号表[添加到符号表<br/>分配新标识符编号]
    检查符号表 -->|是| 获取已有编号[获取已有标识符编号]
    添加到符号表 --> 生成标识符Token
    获取已有编号 --> 生成标识符Token[生成标识符Token]
    生成关键字Token --> 返回([返回])
    生成标识符Token --> 返回
```

## 3.1.8 数字常量识别流程图

```mermaid
flowchart TD
    开始([开始识别数字常量]) --> 保存位置[保存当前位置]
    保存位置 --> 初始化词法值[初始化词法值字符串为空]
    初始化词法值 --> 检查零{当前字符是零?}
    检查零 -->|是| 读取零[读取零字符<br/>追加到词法值]
    读取零 --> 检查十六进制{下一个字符是x或X?}
    检查十六进制 -->|是| 读取x[读取x或X字符<br/>追加到词法值]
    读取x --> 十六进制循环{当前字符是十六进制数字?}
    十六进制循环 -->|是| 读取十六进制[读取十六进制字符<br/>追加到词法值]
    读取十六进制 --> 十六进制循环
    十六进制循环 -->|否| 检查十六进制数量{已读取至少一个十六进制数字?}
    检查十六进制数量 -->|否| 报错十六进制[报错: 十六进制缺少数字]
    检查十六进制数量 -->|是| 生成Token[生成数字常量Token]
    检查十六进制 -->|否| 检查小数点{下一个字符是小数点?}
    检查小数点 -->|是| 浮点数路径[处理浮点数路径]
    检查小数点 -->|否| 生成Token
    检查零 -->|否| 检查一到九{当前字符是一到九?}
    检查一到九 -->|是| 十进制循环{当前字符是数字?}
    十进制循环 -->|是| 读取十进制[读取十进制字符<br/>追加到词法值]
    读取十进制 --> 十进制循环
    十进制循环 -->|否| 检查小数点2{当前字符是小数点?}
    检查小数点2 -->|是| 浮点数路径
    检查小数点2 -->|否| 生成Token
    浮点数路径 --> 处理小数指数[处理小数部分和指数部分]
    处理小数指数 --> 生成Token
    检查一到九 -->|否| 报错格式[报错: 数字格式错误]
```

## 3.1.10 字符常量识别流程图

```mermaid
flowchart TD
    开始([开始识别字符常量]) --> 保存位置[保存当前位置]
    保存位置 --> 读取开始引号[读取开始单引号]
    读取开始引号 --> 检查末尾{到达输入末尾?}
    检查末尾 -->|是| 报错未闭合[报错: 字符常量未闭合]
    检查末尾 -->|否| 读取字符内容[读取字符内容]
    读取字符内容 --> 检查转义{字符是反斜杠?}
    检查转义 -->|是| 检查末尾2{到达输入末尾?}
    检查末尾2 -->|是| 报错转义未闭合[报错: 转义未闭合]
    检查末尾2 -->|否| 读取转义字符[读取转义字符]
    读取转义字符 --> 检查转义合法{转义字符在合法转义字符集中?}
    检查转义合法 -->|否| 报错非法转义[报错: 非法转义]
    检查转义合法 -->|是| 检查结束引号
    检查转义 -->|否| 检查非法内容{字符是单引号或换行符?}
    检查非法内容 -->|是| 报错内容非法[报错: 字符常量内容非法]
    检查非法内容 -->|否| 检查结束引号{读取下一个字符是单引号?}
    检查结束引号 -->|否| 报错未闭合
    检查结束引号 -->|是| 生成Token[生成字符常量Token]
    生成Token --> 返回([返回])
```

## 3.1.12 字符串常量识别流程图

```mermaid
flowchart TD
    开始([开始识别字符串常量]) --> 保存位置[保存当前位置]
    保存位置 --> 读取开始引号[读取开始双引号]
    读取开始引号 --> 初始化缓冲区[初始化字符串缓冲区为空]
    初始化缓冲区 --> 循环判断{未到达输入末尾?}
    循环判断 -->|否| 报错未闭合[报错: 字符串常量未闭合]
    循环判断 -->|是| 读取字符[读取字符]
    读取字符 --> 检查结束引号{字符是双引号?}
    检查结束引号 -->|是| 生成Token[生成字符串常量Token]
    检查结束引号 -->|否| 检查转义{字符是反斜杠?}
    检查转义 -->|是| 检查末尾{到达输入末尾?}
    检查末尾 -->|是| 报错转义未闭合[报错: 字符串转义未闭合]
    检查末尾 -->|否| 读取转义字符[读取转义字符]
    读取转义字符 --> 检查转义合法{转义字符在合法转义字符集中?}
    检查转义合法 -->|否| 报错非法转义[报错: 非法转义]
    检查转义合法 -->|是| 追加转义序列[追加转义序列到缓冲区]
    追加转义序列 --> 循环判断
    检查转义 -->|否| 检查换行{字符是换行符?}
    检查换行 -->|是| 报错未闭合
    检查换行 -->|否| 追加字符[追加字符到缓冲区]
    追加字符 --> 循环判断
    生成Token --> 返回([返回])
```

## 3.1.14 运算符和界符识别流程图

```mermaid
flowchart TD
    开始([开始识别运算符或界符]) --> 保存位置[保存当前位置]
    保存位置 --> 查看两字符[查看两个字符]
    查看两字符 --> 检查双字符运算符{两个字符是双字符运算符?<br/>如等于等于、小于等于、大于等于、不等于等}
    检查双字符运算符 -->|是| 读取两字符[读取两个字符]
    读取两字符 --> 生成双字符Token[生成双字符运算符Token]
    检查双字符运算符 -->|否| 查看单字符[查看一个字符]
    查看单字符 --> 检查界符{字符是界符?<br/>如左括号、右括号、左花括号、右花括号、分号、逗号等}
    检查界符 -->|是| 读取界符[读取界符字符]
    读取界符 --> 生成界符Token[生成界符Token]
    检查界符 -->|否| 检查单字符运算符{字符是单字符运算符?<br/>如加号、减号、乘号、除号、小于、大于、等于等}
    检查单字符运算符 -->|是| 读取运算符[读取运算符字符]
    读取运算符 --> 生成运算符Token[生成单字符运算符Token]
    检查单字符运算符 -->|否| 报错无法识别[报错: 无法识别的符号]
    生成双字符Token --> 返回([返回])
    生成界符Token --> 返回
    生成运算符Token --> 返回
```

